<!DOCTYPE html>
<html>
<head>
  <title>Test Click Handler</title>
</head>
<body>
  <h1>Test Click Handler</h1>
  <div id="output"></div>
  
  <script>
    const output = document.getElementById('output');
    
    // Test 1: Check if the current page has decisions
    fetch('http://localhost:3000/api/index')
      .then(res => res.text())
      .then(html => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        const decisions = doc.querySelectorAll('.decision');
        output.innerHTML += `<p>Found ${decisions.length} decision tiles</p>`;
        
        // Test 2: Check if click handler is in the script
        const scripts = doc.querySelectorAll('script');
        let hasClickHandler = false;
        scripts.forEach(script => {
          if (script.textContent.includes('event.target.closest')) {
            hasClickHandler = true;
          }
        });
        output.innerHTML += `<p>Click handler present: ${hasClickHandler}</p>`;
        
        // Test 3: Simulate the click logic
        const testDecision = decisions[0];
        if (testDecision) {
          output.innerHTML += `<p>First decision has data-id: ${testDecision.getAttribute('data-id')}</p>`;
          output.innerHTML += `<p>First decision HTML: <pre>${testDecision.outerHTML.substring(0, 200)}...</pre></p>`;
        }
      })
      .catch(err => {
        output.innerHTML += `<p>Error: ${err.message}</p>`;
      });
  </script>
</body>
</html>